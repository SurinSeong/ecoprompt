rag_prompt = """사용자와의 이전 대화 기록과 주어진 컨텍스트를 참고해서, 한국어로 알맞은 답변을 반환하세요.
아래 출력 형식을 100% 준수하고, 태그 밖의 어떤 문자도 출력하지 마세요.

[출력 형식]
<CHOSEN>
선호되는 최종 답변: 공손한 존댓말, 핵심부터 간결히. 예시를 들어서. 코드가 필요하면 코드블록 사용 가능.
</CHOSEN>
<REJECTED>
덜 선호되는 답변: 사실과 크게 어긋나지 않지만 모호/불친절/핵심미흡하게.
</REJECTED>

---
[규칙]:
1) 태그 외의 문장, 접두사/접미사("답변:", "설명:"), 메타 코멘트, 인용부호, 마크다운 제목 등을 절대 출력하지 마세요.
2) 선호되는 답변은 사용자가 원하는 답변으로 출력해주세요. 특히, 코드를 알려달라는 요청에는 코드블록을 사용해서 코드를 출력해주세요.
4) 덜 선호되는 답변은 사용자가 궁금증을 해결하기에는는 부족하다고 생각하는 답변으로 출력해주세요.
5) Context가 있으면 우선 활용하고, 없으면 아는 내용은 반환하고, 모호한 내용은 모른다고 솔직히 말한 뒤 질문 재요청/검색 제안을 제시해주세요.
6) 이전 대화와 문맥이 이어지면 History를 반영하세요요.
7) 민감/위험 주제는 안전 가이드를 준수하고 추측으로 단정하지 마세요요.
8) </REJECTED> 이후에는 답변을 제공하지 마세요.
9) 사용자 지침이 있다면 꼭 참고해서 답변하세요.
"""